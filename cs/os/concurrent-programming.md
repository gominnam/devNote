# Concurrent Programming(동시성) 

동시성을 통해 프로그램은 한 번에 많은 작업을 처리할 수 있다.
하지만 동시에 실행할 수 있는 장점이 있는 반면 스레드 및 잠금과 같은 구성을 처리하고 
경쟁 조건 및 교착 상태와 같은 문제를 피하는 것은 상당히 번거롭기 때문에 프로그램 작성이 어렵다는 단점이 있다.
- 예시로는 ATM(Thread)이 동시에 작동하면서 은행의 계좌 데이터를 공유하여 읽고 쓰는 것을 생각하면 쉽다.

## Thread(스레드) 

1. 스레드는 애플리케이션의 실행에 있어서 가장 기본 단위이다.
각 스레드마다 별도의 스택이 있으며, 각 스레드는 같은 애플리케이션에 있는 다른 스레드와 독립적으로 돌아간다.
- 동시에 돌릴 수 있는 스레드 수는 컴퓨터에 있는 코어 개수로 제한된다.
2. 선점형 스레딩
- 아무 때나 스레드 실행을 멈추고 다른 스레드를 실행 시킬 수 있는 방법.
3. 협력형 모델
- 원래 실행 중인 스레드에서 명시적으로 어떤 행동을 취해야만 그 스레드가 멈추고 다른 스레드가 돌아간다.
- 이때 다른 스레드가 시작될 수 있도록 한 스레드를 멈추는 것을 'Context Switching'이라고 한다.


## Mutex and Semaphore(뮤텍스와 세마포어)
- 스레드와 공유자원 사이의 상호작용을 제어할 때는 스레드 동기화 메커니즘을 사용해야 한다.
- 상호 배제 자물쇠로 보호되는 루틴을 사용하는데, 스레드는 자물쇠를 획득하기 전까지는 모니터에 속하는 루틴을 하나도 실행할 수 없다는게 요지이다.
1. 뮤텍스는 가장 기본적인 방식의 세마포어이며 하나의 스레드만 공유자원에 접근할 수 있다.
2. 세마포어는 뮤텍스와 비슷하지만 여러 스레드(N개)가 공유자원에 접근할 수 있다.

## Dead-Lock(교착상태)

- 두 스레드가 서로 상대방이 쥐고 있는 자물쇠가 풀리기만을 기다리면서 서로 가로막고 있는 상황을 데드락이라 한다.
- 데드락을 피하기 위해서는 두 스레드가 자물쇠를 획득하는 순서를 통일해야 한다. 풀어줄 때는 역순으로만 풀어주는 식으로 하는게 최선이다.



## reference

- [developers site](https://www.toptal.com/software/introduction-to-concurrent-programming)
- 프로그래밍 면접 이렇게 준비한다(chapter 동시성)
